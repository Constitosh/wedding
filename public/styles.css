/* ============ Basis / Theme ============ */
:root{
  --bg:#faf7f2;
  --ink:#2b2b2b;
  --accent:#b08d57;
  --card:#fff;
  --muted:#7a7a7a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans";
  color:var(--ink);
  background:var(--bg);
}
.container{max-width:720px;margin:0 auto;padding:24px}
.header{text-align:center;margin:24px 0 12px;letter-spacing:.03em}
.hidden{display:none!important}

/* ============ Kuvert mit Aufreiß-Effekt ============ */
.envelope-wrap{
  display:grid;place-items:center;margin-top:24px;
  perspective:1000px;
}

.envelope{
  width:360px;height:240px;position:relative;cursor:pointer;
  transform-style:preserve-3d;transition:transform .35s ease;
}
.envelope:hover{transform:translateY(-2px)}
.open-label{
  position:absolute;inset:0;display:grid;place-items:center;
  font-size:18px;color:var(--muted);z-index:10;user-select:none
}

/* Tasche */
.pocket{
  position:absolute;inset:0;background:#fff;border:1px solid #eee;border-radius:6px;
  box-shadow:0 10px 30px rgba(0,0,0,.14);z-index:1;
}

/* Klappe (dreieck) – klappt nach hinten */
.flap{
  position:absolute;left:0;right:0;top:0;height:56%;
  transform-origin:top center;transform:rotateX(0deg);
  transition:transform .7s cubic-bezier(.2,.6,.15,1);
  z-index:6;
  background:#fff;border:1px solid #eee;border-bottom:none;border-top-left-radius:6px;border-top-right-radius:6px;
  clip-path:polygon(50% 0%,100% 100%,0% 100%);
  box-shadow:0 8px 18px rgba(0,0,0,.06);
}
/* feine Falzlinie */
.flap::after{
  content:"";position:absolute;left:12%;right:12%;bottom:18%;
  height:2px;background:linear-gradient(to right,transparent,#e9e1d6,transparent);opacity:.85
}

/* Brief (fährt nach oben raus) */
.letter{
  position:absolute;left:14px;right:14px;bottom:10px;top:28%;
  background:#fffdfa;border:1px solid #eee3cf;border-radius:4px;
  box-shadow:0 6px 16px rgba(0,0,0,.07);
  transform:translateY(24%);
  transition:transform .9s cubic-bezier(.2,.6,.15,1) .22s, box-shadow .3s ease .22s;
  z-index:2;
}
.seal-line{position:absolute;left:0;right:0;top:24px;height:2px;background:linear-gradient(to right,transparent,#f0e6d8,transparent)}

/* --- Aufreiß-Streifen (gezackte Kante) ---
   Wir zeichnen einen schmalen Papierstreifen mit gezackter Unterkante via mask.
   Er "wächst" von links nach rechts, um das Aufreißen zu simulieren. */
.envelope::after{
  content:"";position:absolute;left:14px;right:14px;top:calc(28% - 14px);height:32px;
  background:#fff;z-index:8;pointer-events:none;
  /* leichte Papier-Schattenkante */
  box-shadow:0 2px 0 #e9e1d6, 0 8px 18px rgba(0,0,0,.08);

  /* Zacken: doppelte conic-gradient-Masken (breit unterstützt) */
  --s:12px;   /* Zackenbreite */
  --d:10px;   /* Zackenhöhe (Tiefe) */

  -webkit-mask:
    conic-gradient(from -.25turn at left var(--d) bottom var(--d), #000 90deg, #0000 0) 0 100%/calc(2*var(--s)) var(--s) repeat-x,
    conic-gradient(from  .25turn at left var(--d) bottom var(--d), #000 90deg, #0000 0) var(--s) 100%/calc(2*var(--s)) var(--s) repeat-x,
    linear-gradient(#000 0 0);
  mask:
    conic-gradient(from -.25turn at left var(--d) bottom var(--d), #000 90deg, #0000 0) 0 100%/calc(2*var(--s)) var(--s) repeat-x,
    conic-gradient(from  .25turn at left var(--d) bottom var(--d), #000 90deg, #0000 0) var(--s) 100%/calc(2*var(--s)) var(--s) repeat-x,
    linear-gradient(#000 0 0);

  transform-origin:left center;
  transform:scaleX(0);
  opacity:0;
}

/* Öffnen: Klappe klappt weg, Brief fährt hoch, Aufreißen "zieht" von links nach rechts */
.envelope.opened .flap{
  transform:rotateX(180deg);
  box-shadow:0 2px 8px rgba(0,0,0,.04);
  animation:flap-wiggle .45s ease .05s 1; /* kleines Zucken */
}
.envelope.opened .letter{
  transform:translateY(-26%);
  box-shadow:0 10px 26px rgba(0,0,0,.10);
}
.envelope.opened::after{
  opacity:1;
  animation:tear-reveal .7s cubic-bezier(.2,.7,.15,1) .05s both;
}

/* sanfter Pop des ganzen Kuverts */
.envelope.opened{animation:env-pop .45s ease both}
@keyframes env-pop{
  0%{transform:scale(1)}
  60%{transform:scale(1.02)}
  100%{transform:scale(1.004)}
}

/* "Reißbewegung": unregelmäßiges Voranschreiten (leichtes Zittern) */
@keyframes tear-reveal{
  0%   {transform:scaleX(0)}
  8%   {transform:scaleX(.12) translateX(1px)}
  16%  {transform:scaleX(.22) translateX(-1px)}
  28%  {transform:scaleX(.36) translateX(.5px)}
  42%  {transform:scaleX(.55) translateX(-.5px)}
  60%  {transform:scaleX(.74)}
  78%  {transform:scaleX(.88)}
  100% {transform:scaleX(1)}
}

/* kleines Zucken der Klappe beim Anreißen */
@keyframes flap-wiggle{
  0%{transform:rotateX(0deg)}
  18%{transform:rotateX(12deg)}
  35%{transform:rotateX(6deg)}
  100%{transform:rotateX(180deg)}
}

/* ============ Slider ============ */
.slider{
  margin-top:24px;background:var(--card);border:1px solid #eee;border-radius:8px;
  box-shadow:0 8px 30px rgba(0,0,0,.08);overflow:hidden
}
.slide{display:none;padding:0}
.slide.active{display:block}
.slide img{width:100%;height:auto;display:block}

.slider-controls{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 14px;border-top:1px solid #eee
}
.btn{
  border:1px solid #ddd;background:#fff;padding:10px 14px;border-radius:6px;cursor:pointer;
  transition:box-shadow .2s ease, transform .05s ease
}
.btn:hover{box-shadow:0 4px 14px rgba(0,0,0,.08)}
.btn:active{transform:translateY(1px)}
.btn.primary{border-color:var(--accent);color:#fff;background:var(--accent)}
.badge{display:inline-block;padding:4px 10px;border-radius:999px;background:#f6efe4;border:1px solid #ecdcc3;color:#6d5a38;font-size:12px}

/* ============ Formular ============ */
.form-card{padding:18px}
.form-grid{display:grid;gap:12px}
label{font-size:14px;color:#333}
input[type="text"],input[type="number"],textarea,select{
  width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:16px
}
.hint{font-size:12px;color:var(--muted)}
.footer-note{text-align:center;color:var(--muted);font-size:12px;margin:18px 0 12px}

/* ============ Accessibility ============ */
@media (prefers-reduced-motion:reduce){
  .envelope, .flap, .letter, .envelope::after{transition:none!important;animation:none!important}
}
.envelope.opened .open-label { display: none !important; }
